(env) (baobab)-[philipm@login1 rtk]$ Connection to login1.baobab.hpc.unige.ch closed by remote host.
Connection to login1.baobab.hpc.unige.ch closed.
client_loop: send disconnect: Broken pipe
philipm@CL-X1549VL2PR ~ % ssh philipm@login1.baobab.hpc.unige.ch
Enter passphrase for key '/Users/philipm/.ssh/id_ed25519': 
Last login: Mon Jun 30 17:34:24 2025 from 10.20.190.221
 ____              _           _
|  _ \            | |         | |
| |_) | __ _  ___ | |__   __ _| |__
|  _ < / _` |/ _ \| '_ \ / _` | '_ \
| |_) | (_| | (_) | |_) | (_| | |_) |
|____/ \__,_|\___/|_.__/ \__,_|_.__/
             _             _      __ 
            | |           (_)    /_ |
            | | ___   __ _ _ _ __ | |
            | |/ _ \ / _` | | '_ \| |
            | | (_) | (_| | | | | | |
            |_|\___/ \__, |_|_| |_|_|
                      __/ |          
                      |___/  

 Documentation: https://doc.eresearch.unige.ch/hpc/start
 Forum: https://hpc-community.unige.ch/
 OpenOndemand: https://openondemand.baobab.hpc.unige.ch/
 support: https://doc.eresearch.unige.ch/hpc/start#support_-_get_help


(baobab)-[philipm@login1 ~]$ cd rtk
(baobab)-[philipm@login1 rtk]$ ls
custom_check.py       howto.png  images-erreurs  pytest.ini             rtk                  setup.py          slurm-925077.out  yaltaienv
env                   images     krakenv         quickyaltaiinstall.sh  rtk-script.py        slurm-856712.out  slurm-925484.out
example-manifests.py  images2    manifests.txt   README.md              rtk-script-taton.py  slurm-863221.out  submission.sh
HOWTO.md              images3    models          requirements.txt       rtk-script-test.py   slurm-863280.out  tests
(baobab)-[philipm@login1 rtk]$ module load GCCcore/11.3.0 Python/3.10.4
(baobab)-[philipm@login1 rtk]$ python --version
Python 3.10.4
(baobab)-[philipm@login1 rtk]$ salloc --partition=shared-cpu --time=00:45:00 --cpus-per-task=4 --mem=32GB
salloc: Pending job allocation 928326
salloc: job 928326 queued and waiting for resources
salloc: job 928326 has been allocated resources
salloc: Granted job allocation 928326
salloc: Waiting for resource configuration
salloc: Nodes cpu324 are ready for job
bash-5.1$ source env/bin/activate
(env) bash-5.1$ python rtk-script-taton.py
[Task] Segment
Using default Kraken line segmenter.
[Subtask] Checking prior processed documents: 100%|████████████████████| 40/40 [00:00<00:00, 4059.43it/s]
[Subtask] Processing YALTAi segmenter command:  35%|███████▎             | 14/40 [05:05<06:38, 15.31s/it]Error detected in subprocess...

╭─────────────────────────────── Traceback (most recent call last) ────────────────────────────────╮
│ /home/users/p/philipm/rtk/yaltaienv/bin/yaltai:8 in <module>                                     │
│                                                                                                  │
│   5 from yaltai.cli.yaltai import yaltai_cli                                                     │
│   6 if __name__ == '__main__':                                                                   │
│   7 │   sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])                         │
│ ❱ 8 │   sys.exit(yaltai_cli())                                                                   │
│   9                                                                                              │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:1442 in __call__  │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:1363 in main      │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:1830 in invoke    │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:1862 in invoke    │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:1799 in           │
│ _process_result                                                                                  │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/click/core.py:794 in invoke     │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/kraken/kraken.py:431 in         │
│ process_pipeline                                                                                 │
│                                                                                                  │
│   428 │   │   │   │   if len(fc) - 2 == idx:                                                     │
│   429 │   │   │   │   │   ctx.meta['last_process'] = True                                        │
│   430 │   │   │   │   with threadpool_limits(limits=ctx.meta['threads']):                        │
│ ❱ 431 │   │   │   │   │   task(input=input, output=output)                                       │
│   432 │   │   except Exception as e:                                                             │
│   433 │   │   │   logger.error(f'Failed processing {io_pair[0]}: {str(e)}')                      │
│   434 │   │   │   if ctx.meta['raise_failed']:                                                   │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/yaltai/cli/krakn.py:49 in       │
│ segmenter                                                                                        │
│                                                                                                  │
│    46 │   │   │   yolo_model, input=input,                                                       │
│    47 │   │   │   apply_deskew=deskew, max_angle=max_angle                                       │
│    48 │   │   )                                                                                  │
│ ❱  49 │   │   res: Segmentation = yaltai.models.krakn.segment(                                   │
│    50 │   │   │   im, text_direction, mask=mask, model=model, device=device,                     │
│    51 │   │   │   regions=regions, ignore_lignes=ignore_lines,                                   │
│    52 │   │   │   raise_on_error=ctx.meta['raise_failed'], autocast=ctx.meta["autocast"]         │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/yaltai/models/krakn.py:135 in   │
│ segment                                                                                          │
│                                                                                                  │
│   132 │   │   suppl_obj = scale_regions([x.boundary for x in suppl_obj], 1/rets['scale'])        │
│   133 │   │   line_regs = scale_regions([x.boundary for x in line_regs], 1/rets['scale'])        │
│   134 │   │                                                                                      │
│ ❱ 135 │   │   _lines = vec_lines(**rets,                                                         │
│   136 │   │   │   │   │   │      regions=line_regs,                                              │
│   137 │   │   │   │   │   │      text_direction=text_direction,                                  │
│   138 │   │   │   │   │   │      suppl_obj=suppl_obj,                                            │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/kraken/blla.py:229 in vec_lines │
│                                                                                                  │
│   226 │   │   for reg_idx, reg_pol in enumerate(reg_pols):                                       │
│   227 │   │   │   if is_in_region(bl_ls, reg_pol):                                               │
│   228 │   │   │   │   suppl_obj.append(regions[reg_idx])                                         │
│ ❱ 229 │   │   pol = calculate_polygonal_environment(baselines=[bl[1]],                           │
│   230 │   │   │   │   │   │   │   │   │   │   │     im_feats=im_feats,                           │
│   231 │   │   │   │   │   │   │   │   │   │   │     suppl_obj=suppl_obj,                         │
│   232 │   │   │   │   │   │   │   │   │   │   │     topline=topline,                             │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/kraken/lib/segmentation.py:766  │
│ in calculate_polygonal_environment                                                               │
│                                                                                                  │
│    763 │   │   │   p_dir = (p_dir.T / np.sqrt(np.sum(p_dir**2, axis=-1)))                        │
│    764 │   │   │   env_up, env_bottom = _calc_roi(line, bounds, baselines[:idx] + baselines[idx  │
│    765 │   │   │                                                                                 │
│ ❱  766 │   │   │   polygons.append(_extract_patch(env_up,                                        │
│    767 │   │   │   │   │   │   │   │   │   │      env_bottom,                                    │
│    768 │   │   │   │   │   │   │   │   │   │      line.astype('int'),                            │
│    769 │   │   │   │   │   │   │   │   │   │      offset_line.astype('int'),                     │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/kraken/lib/segmentation.py:590  │
│ in _extract_patch                                                                                │
│                                                                                                  │
│    587 │   bottom_offset_polygon = np.concatenate((offset_baseline, env_bottom[::-1]))           │
│    588 │                                                                                         │
│    589 │   angle = np.arctan2(dir_vec[1], dir_vec[0])                                            │
│ ❱  590 │   roi_polygon = unary_union([geom.Polygon(upper_polygon), geom.Polygon(bottom_polygon)  │
│    591 │                                                                                         │
│    592 │   if topline:                                                                           │
│    593 │   │   upper_seam = _calc_seam(baseline, upper_polygon, angle, im_feats)                 │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/shapely/ops.py:135 in           │
│ unary_union                                                                                      │
│                                                                                                  │
│   132 │   │   Usually used to convert a collection into the smallest set of polygons             │
│   133 │   │   that cover the same area.                                                          │
│   134 │   │   """                                                                                │
│ ❱ 135 │   │   return shapely.union_all(geoms, axis=None)                                         │
│   136                                                                                            │
│   137                                                                                            │
│   138 operator = CollectionOperator()                                                            │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/shapely/decorators.py:77 in     │
│ wrapped                                                                                          │
│                                                                                                  │
│   74 │   │   try:                                                                                │
│   75 │   │   │   for arr in array_args:                                                          │
│   76 │   │   │   │   arr.flags.writeable = False                                                 │
│ ❱ 77 │   │   │   return func(*args, **kwargs)                                                    │
│   78 │   │   finally:                                                                            │
│   79 │   │   │   for arr, old_flag in zip(array_args, old_flags):                                │
│   80 │   │   │   │   arr.flags.writeable = old_flag                                              │
│                                                                                                  │
│ /home/users/p/philipm/rtk/yaltaienv/lib/python3.10/site-packages/shapely/set_operations.py:421   │
│ in union_all                                                                                     │
│                                                                                                  │
│   418 │   │                                                                                      │
│   419 │   │   return lib.unary_union_prec(collections, grid_size, **kwargs)                      │
│   420 │                                                                                          │
│ ❱ 421 │   return lib.unary_union(collections, **kwargs)                                          │
│   422                                                                                            │
│   423                                                                                            │
│   424 unary_union = union_all                                                                    │
╰──────────────────────────────────────────────────────────────────────────────────────────────────╯
GEOSException: TopologyException: side location conflict at 295.5 369.80000000000001. This can occur if the input geometry is invalid.

Stopped process

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.jpg: 1088x1280 2 MainZones, 2 MarginTextZones, 9921.8ms
Speed: 177.0ms preprocess, 9921.8ms inference, 4.1ms postprocess per image at shape (1, 3, 1088, 1280)
[06/30/25 20:43:43] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:44:03] INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 4 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.xml                                                                                                                                            krakn.py:63
[06/30/25 20:44:04] INFO     Serialize 49 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.jpg with template alto.                                                                                                              serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.jpg: 1280x1184 1 MainZone, 1 MarginTextZone, 10714.7ms
Speed: 10.8ms preprocess, 10714.7ms inference, 1.2ms postprocess per image at shape (1, 3, 1280, 1184)
[06/30/25 20:44:22] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:44:31] INFO     Compute reading order on 17 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
[06/30/25 20:44:32] INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.xml                                                                                                                                            krakn.py:63
INFO     Serialize 18 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.jpg with template alto.                                                                                                              serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9684.0ms
Speed: 9.8ms preprocess, 9684.0ms inference, 1.3ms postprocess per image at shape (1, 3, 1088, 1280)
[06/30/25 20:44:51] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:45:12] INFO     Compute reading order on 25 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.xml                                                                                                                                            krakn.py:63
INFO     Serialize 50 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.jpg with template alto.                                                                                                              serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9569.8ms
Speed: 9.5ms preprocess, 9569.8ms inference, 1.3ms postprocess per image at shape (1, 3, 1088, 1280)
[06/30/25 20:45:31] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:45:52] INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 22 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.xml                                                                                                                                            krakn.py:63
INFO     Serialize 48 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.jpg with template alto.                                                                                                              serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.jpg: 1280x1088 1 MainZone, 9642.2ms
Speed: 9.7ms preprocess, 9642.2ms inference, 1.2ms postprocess per image at shape (1, 3, 1280, 1088)
[06/30/25 20:46:08] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:46:22] INFO     Compute reading order on 26 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 4 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.xml                                                                                                                                              krakn.py:63
INFO     Serialize 29 records from /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.jpg with template alto.                                                                                                                serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9589.0ms
Speed: 9.6ms preprocess, 9589.0ms inference, 1.0ms postprocess per image at shape (1, 3, 1088, 1280)
[06/30/25 20:46:41] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:47:02] INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.xml                                                                                                                                            krakn.py:63
INFO     Serialize 49 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.jpg with template alto.                                                                                                              serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.jpg: 1280x1056 1 MainZone, 1 DigitizationArtefactZone, 9279.2ms
Speed: 9.8ms preprocess, 9279.2ms inference, 1.1ms postprocess per image at shape (1, 3, 1280, 1056)
[06/30/25 20:47:18] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:47:33] INFO     Compute reading order on 26 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 21 lines in lr direction                                                                                                                                                                                                            segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Compute reading order on 6 lines in lr direction                                                                                                                                                                                                             segmentation.py:93
INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139
INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.xml                                                                                                                                              krakn.py:63
INFO     Serialize 51 records from /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.jpg with template alto.                                                                                                                serialization.py:109

image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0288.jpg: 1088x1280 2 MainZones, 4 MarginTextZones, 9505.0ms
Speed: 9.7ms preprocess, 9505.0ms inference, 1.0ms postprocess per image at shape (1, 3, 1088, 1280)
[06/30/25 20:47:52] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211
[06/30/25 20:48:03] ERROR    Failed processing /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0288.jpg: TopologyException: side location conflict at 295.5 369.80000000000001. This can occur if the input geometry is invalid.                        kraken.py:433
INPUT SIZE DIFF WITH OUTPUT SIZE
['', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.jpg: 1088x1280 2 MainZones, 2 MarginTextZones, 9921.8ms', 'Speed: 177.0ms preprocess, 9921.8ms inference, 4.1ms postprocess per image at shape (1, 3, 1088, 1280)', '[06/30/25 20:43:43] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:44:03] INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 4 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.xml                                                                                                                                            krakn.py:63', '[06/30/25 20:44:04] INFO     Serialize 49 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0302.jpg with template alto.                                                                                                              serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.jpg: 1280x1184 1 MainZone, 1 MarginTextZone, 10714.7ms', 'Speed: 10.8ms preprocess, 10714.7ms inference, 1.2ms postprocess per image at shape (1, 3, 1280, 1184)', '[06/30/25 20:44:22] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:44:31] INFO     Compute reading order on 17 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', '[06/30/25 20:44:32] INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.xml                                                                                                                                            krakn.py:63', 'INFO     Serialize 18 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0283.jpg with template alto.                                                                                                              serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9684.0ms', 'Speed: 9.8ms preprocess, 9684.0ms inference, 1.3ms postprocess per image at shape (1, 3, 1088, 1280)', '[06/30/25 20:44:51] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:45:12] INFO     Compute reading order on 25 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 1 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.xml                                                                                                                                            krakn.py:63', 'INFO     Serialize 50 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0303.jpg with template alto.                                                                                                              serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9569.8ms', 'Speed: 9.5ms preprocess, 9569.8ms inference, 1.3ms postprocess per image at shape (1, 3, 1088, 1280)', '[06/30/25 20:45:31] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:45:52] INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 22 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.xml                                                                                                                                            krakn.py:63', 'INFO     Serialize 48 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0301.jpg with template alto.                                                                                                              serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.jpg: 1280x1088 1 MainZone, 9642.2ms', 'Speed: 9.7ms preprocess, 9642.2ms inference, 1.2ms postprocess per image at shape (1, 3, 1280, 1088)', '[06/30/25 20:46:08] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:46:22] INFO     Compute reading order on 26 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 4 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.xml                                                                                                                                              krakn.py:63', 'INFO     Serialize 29 records from /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0351.jpg with template alto.                                                                                                                serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.jpg: 1088x1280 2 MainZones, 1 MarginTextZone, 9589.0ms', 'Speed: 9.6ms preprocess, 9589.0ms inference, 1.0ms postprocess per image at shape (1, 3, 1088, 1280)', '[06/30/25 20:46:41] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:47:02] INFO     Compute reading order on 23 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 24 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 2 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 3 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.xml                                                                                                                                            krakn.py:63', 'INFO     Serialize 49 records from /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0293.jpg with template alto.                                                                                                              serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.jpg: 1280x1056 1 MainZone, 1 DigitizationArtefactZone, 9279.2ms', 'Speed: 9.8ms preprocess, 9279.2ms inference, 1.1ms postprocess per image at shape (1, 3, 1280, 1056)', '[06/30/25 20:47:18] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:47:33] INFO     Compute reading order on 26 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 21 lines in lr direction                                                                                                                                                                                                            segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Compute reading order on 6 lines in lr direction                                                                                                                                                                                                             segmentation.py:93', 'INFO     Perform topological sort on partially ordered lines                                                                                                                                                                                                         segmentation.py:139', 'INFO     Serializing as alto into /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.xml                                                                                                                                              krakn.py:63', 'INFO     Serialize 51 records from /home/users/p/philipm/rtk/images2/Magi_Grégoire_1770_COL_E_295/FRCAOM06_COLE_241459A_0352.jpg with template alto.                                                                                                                serialization.py:109', '', 'image 1/1 /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0288.jpg: 1088x1280 2 MainZones, 4 MarginTextZones, 9505.0ms', 'Speed: 9.7ms preprocess, 9505.0ms inference, 1.0ms postprocess per image at shape (1, 3, 1088, 1280)', '[06/30/25 20:47:52] INFO     Vectorizing baselines                                                                                                                                                                                                                                               blla.py:211', '[06/30/25 20:48:03] ERROR    Failed processing /home/users/p/philipm/rtk/images2/Lucas_Alexandre_1787_COL_E_294/FRCAOM06_COLE_241457A_0288.jpg: TopologyException: side location conflict at 295.5 369.80000000000001. This can occur if the input geometry is invalid.                        kraken.py:433']
[Subtask] Processing YALTAi segmenter command:  68%|██████████████▏      | 27/40 [12:37<06:04, 28.07s/it]
[Task] Clean-Up Serialization
[Subtask] Checking prior processed documents: 100%|█████████████████████| 27/27 [00:00<00:00, 384.06it/s]
[Subtask] Cleaning...: 100%|████████████████████████████████████████████| 27/27 [00:00<00:00, 322.59it/s]
[Task] OCR
[Subtask] Checking prior processed documents: 100%|█████████████████████| 27/27 [00:00<00:00, 452.36it/s]
[Subtask] Processing Kraken recognizer command: 100%|████████████████████| 27/27 [09:31<00:00, 21.16s/it]
[Task] Extract
[Subtask] Checking prior processed documents: 100%|████████████████████| 27/27 [00:00<00:00, 3569.28it/s]
[Subtask] Cleaning...: 100%|█████████████████████████████████████████████| 27/27 [00:00<00:00, 52.84it/s]